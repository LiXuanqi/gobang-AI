!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.interval=50,e.edgeLength=700,e.lineWidth=2,e.lineColor="#777",e.chessRadius=22},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.color=i}return i(t,[{key:"draw",value:function(){context.beginPath(),context.arc(this.y*r.interval,this.x*r.interval,r.chessRadius,0,2*Math.PI),context.fillStyle=this.color,context.fill(),context.lineWidth=1,context.strokeStyle="black",context.stroke(),context.closePath()}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(1),u=(i=a)&&i.__esModule?i:{default:i};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.n=o.edgeLength/o.interval;var e=c(this.n);this._data=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e))}return r(t,[{key:"step",value:function(t,e,n){var i=null;"black"===n?(i=new u.default(t,e,"black"),this._data[t][e]=1):(i=new u.default(t,e,"white"),this._data[t][e]=2),i.draw()}},{key:"isEmpty",value:function(t,e){return 0===this._data[t][e]}},{key:"isWin",value:function(t,e){return!!this._checkRow(t,e)||(!!this._checkCol(t,e)||(!!this._checkDiag(t,e)||!!this._checkInverseDiag(t,e)))}},{key:"_inBound",value:function(t,e){return 0<=t&&t<=this.n&&0<=e&&e<=this.n}},{key:"_checkInverseDiag",value:function(t,e){for(var n=this._data,i=n[t][e],r=1,o=t,a=e;this._inBound(t+1,e-1)&&n[t+1][e-1]===i;)r++,t++,e--;for(t=o,e=a;this._inBound(t-1,e+1)&&n[t-1][e+1]===i;)r++,t--,e++;return r>=5}},{key:"_checkDiag",value:function(t,e){for(var n=this._data,i=n[t][e],r=1,o=t,a=e;this._inBound(t+1,e+1)&&n[t+1][e+1]===i;)r++,t++,e++;for(t=o,e=a;this._inBound(t-1,e-1)&&n[t-1][e-1]===i;)r++,t--,e--;return r>=5}},{key:"_checkCol",value:function(t,e){for(var n=this._data,i=n[t][e],r=1,o=t;this._inBound(t+1,e)&&n[t+1][e]===i;)r++,t++;for(t=o;this._inBound(t-1,e)&&n[t-1][e]===i;)r++,t--;return r>=5}},{key:"_checkRow",value:function(t,e){for(var n=this._data,i=n[t][e],r=1,o=e;this._inBound(t,e+1)&&n[t][e+1]===i;)r++,e++;for(e=o;this._inBound(t,e-1)&&n[t][e-1]===i;)r++,e--;return r>=5}},{key:"draw",value:function(){context.beginPath();for(var t=0;t<=this.n;t++)context.moveTo(0,o.interval*t),context.lineTo(o.edgeLength,o.interval*t),context.lineWidth=o.lineWidth,context.strokeStyle=o.lineColor,context.stroke(),context.moveTo(o.interval*t,0),context.lineTo(o.interval*t,o.edgeLength),context.lineWidth=o.lineWidth,context.strokeStyle=o.lineColor,context.stroke();context.closePath()}},{key:"data",get:function(){return this._data}}]),t}(),c=function(t){for(var e=[],n=0;n<=t;n++){e[n]=[];for(var i=0;i<=t;i++)e[n][i]=0}return e};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.board=i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=u(n(4)),a=u(n(3));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._n=r.edgeLength/r.interval,this.scores=c(this._n)}return i(t,[{key:"findBestNextStep",value:function(t,e,n){for(var i=new o.default(t,e,n),r=this._findNeedUpdatePoints(i),a=0;a<r.length;a++)if(0===n[r[a].x][r[a].y]){for(var u=this._getAllLines(r[a],n),s=0,c=0;c<u.length;c++)s+=this._evaluate(u[c]);this.scores[r[a].x][r[a].y]=s}console.log(this.scores)}},{key:"_evaluate",value:function(t){return-1!==t.indexOf("11111")?5e4:"011110"===t?4320:"011100"===t?720:"001110"===t?720:"011010"===t?720:"010110"===t?720:-1!==t.indexOf("11110")?720:-1!==t.indexOf("01111")?720:-1!==t.indexOf("11011")?720:-1!==t.indexOf("10111")?720:-1!==t.indexOf("11101")?720:"001100"===t?120:"001010"===t?120:"010100"===t?120:"000100"===t?20:"001000"===t?20:0}},{key:"_getAllLines",value:function(t,e){for(var n=[],i=t.x,r=t.y,o=-5;o<1;o++)if(this._inBound(i,r+o)&&this._inBound(i,r+o+5)){var a=""+e[i][r+o]+e[i][r+o+1]+e[i][r+o+2]+e[i][r+o+3]+e[i][r+o+4]+e[i][r+o+5];n.push(a)}for(var u=-5;u<1;u++)if(this._inBound(i+u,r-u)&&this._inBound(i+u+5,r-u-5)){var s=""+e[i+u][r-u]+e[i+u+1][r-u-1]+e[i+u+2][r-u-2]+e[i+u+3][r-u-3]+e[i+u+4][r-u-4]+e[i+u+5][r-u-5];n.push(s)}for(var c=-5;c<1;c++)if(this._inBound(i+c,r)&&this._inBound(i+c+5,r)){var l=""+e[i+c][r]+e[i+c+1][r]+e[i+c+2][r]+e[i+c+3][r]+e[i+c+4][r]+e[i+c+5][r];n.push(l)}for(var f=-5;f<1;f++)if(this._inBound(i+f,r+f)&&this._inBound(i+f+5,r+f+5)){var h=""+e[i+f][r+f]+e[i+f+1][r+f+1]+e[i+f+2][r+f+2]+e[i+f+3][r+f+3]+e[i+f+4][r+f+4]+e[i+f+5][r+f+5];n.push(h)}return n}},{key:"_findNeedUpdatePoints",value:function(t){for(var e=t.x,n=t.y,i=[-1,1,0,0,1,-1,-1,1],r=[-1,1,1,-1,0,0,1,-1],o=[],u=0;u<i.length;u++)for(var s=0;s<5;s++){var c=e+i[u]*s,l=n+r[u]*s;if(this._inBound(c,l)){var f=new a.default(c,l);o.push(f)}}return o}},{key:"_inBound",value:function(t,e){return 0<=t&&t<=this._n&&0<=e&&e<=this._n}}]),t}(),c=function(t){for(var e=[],n=0;n<=t;n++){e[n]=[];for(var i=0;i<=t;i++)e[n][i]=0}return e};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(2)),o=u(n(5)),a=n(0);function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isBlack=!0,this._inProcess=!1,this._board=new r.default,this._board.draw(),this._AI=new o.default}return i(t,[{key:"begin",value:function(){var t=this;this._isBlack=!0,this._inProcess=!0,canvas.onclick=function(e){var n=Math.round(e.offsetY/a.interval),i=Math.round(e.offsetX/a.interval);t.oneRound(n,i)}}},{key:"end",value:function(){this._inProcess=!1}},{key:"oneRound",value:function(t,e){this.step(t,e),this._AI.findBestNextStep(t,e,this._board.data)}},{key:"step",value:function(t,e){this._inProcess&&this._board.isEmpty(t,e)&&(this._isBlack?this._board.step(t,e,"black"):this._board.step(t,e,"white"),this.isWin(t,e)?(alert((this._isBlack?"black":"white")+" win"),this.end()):this._isBlack=!this._isBlack)}},{key:"isWin",value:function(t,e){return this._board.isWin(t,e)}}]),t}();e.default=s},function(t,e,n){"use strict";r(n(2)),r(n(1));var i=r(n(6));function r(t){return t&&t.__esModule?t:{default:t}}window.canvas=document.getElementById("canvas"),window.context=canvas.getContext("2d"),canvas.width=700,canvas.height=700;var o=new i.default;$("#play").click(function(){o.begin()})}]);